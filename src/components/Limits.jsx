import { useContext, useState } from "react";
import { AppContext } from "../context/MainContext";
import Message from "./Message";

import "../css/Limits.css";

const Limits = ({ handler }) => {
  const { loginData, limit, setLimit } = useContext(AppContext);
  const [isMessageVisable, setIsMessageVisable] = useState(false);
  const [message, setMessage] = useState("");

  //input values
  const [newLimitValue, setNewLimitValue] = useState("");
  const [newTargetValue, setNewTargetValue] = useState("");
  const [newEditValue, setNewEditValue] = useState("");

  const handleDeleteLimit = () => {
    if (limit.isLimitSet) {
      fetch("http://127.0.0.1:3030/delete-limit", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ userId: loginData.userId }),
      })
        .then((response) => {
          if (response.status === 200) {
            return response.json();
          } else {
            throw new Error("error");
          }
        })
        .then((data) => {
          if (data.deleted === true) {
            setLimit({
              isLimitSet: false,
            });
            setIsMessageVisable(true);
            setMessage("Deleted succesfull!");
          }
        })
        .catch((error) => console.log("Error", error));
    } else {
      setIsMessageVisable(true);
      setMessage("You need to set limit first!");
    }
  };

  const handleSetLimit = () => {
    if (newLimitValue.length > 0) {
      fetch("http://127.0.0.1:3030/setLimit", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ id: loginData.userId, value: newLimitValue }),
      })
        .then((response) => {
          if (response.status === 200) {
            return response.json();
          } else {
            throw new Error("error");
          }
        })
        .then((data) => {
          if (data.status === "ok") {
            setMessage("Succesfull seted new limit!");
            setLimit({
              isLimitSet: true,
              limitValue: parseFloat(newLimitValue),
              targetValue: 0,
            });
          } else {
            setMessage("Something went wrong on adding new limit!");
          }
          setIsMessageVisable(true);
        });
    }
  };

  const handleSetTarget = () => {
    if (newTargetValue.length > 0) {
      fetch("http://127.0.0.1:3030/setTarget", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ id: loginData.userId, value: newTargetValue }),
      })
        .then((response) => {
          if (response.status === 200) {
            return response.json();
          } else {
            throw new Error("error");
          }
        })
        .then((data) => {
          if (data.status === "ok") {
            setLimit((prevValue) => ({
              isLimitSet: true,
              limitValue: prevValue.limitValue,
              targetValue: parseFloat(newTargetValue),
            }));
            setMessage("Succesfull seted new target!");
          } else {
            setMessage("Something went wrong on adding new target!");
          }
          setIsMessageVisable(true);
        })
        .catch((err) => console.log("error: ", err));
    }
  };

  const handleEditLimit = () => {
    if (newEditValue.length > 0) {
      fetch("http://127.0.0.1:3030/editLimit", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          id: loginData.userId,
          value: newEditValue,
        }),
      })
        .then((response) => {
          if (response.status === 200) {
            return response.json();
          } else {
            throw new Error("error");
          }
        })
        .then((data) => {
          if (data.status === "ok") {
            setLimit((prevValue) => ({
              isLimitSet: true,
              limitValue: prevValue.limitValue + parseFloat(newEditValue),
              targetValue: prevValue.targetValue,
            }));
            setMessage("Succesfull edited new target!");
          } else {
            setMessage("Something went wrong on edditing new target!");
          }
          setIsMessageVisable(true);
        })
        .catch((err) => console.log("error: ", err));
    }
  };

  const handleCloseMessage = () => {
    document.getElementById("deleted").style.opacity = 0;
    document.getElementById("deleted").addEventListener("transitionend", () => {
      document.getElementById("deleted").style.display = "none";
      setIsMessageVisable(false);
    });
  };

  const handleChangeInput = (e) => {
    switch (e.target.name) {
      case "newLimit":
        setNewLimitValue(e.target.value);
        break;
      case "newTarget":
        setNewTargetValue(e.target.value);
        break;
      case "editLimit":
        setNewEditValue(e.target.value);
        break;
      default:
        return null;
    }
  };

  return (
    <>
      <section id="limits">
        <button id="closeLimits" onClick={handler}>
          X
        </button>
        <h1>Limits</h1>
        <div className="limitBoxes">
          <div className="limitBox">
            <p>Set limit</p>
            <svg
              viewBox="0 0 389 389"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g filter="url(#filter0_d)">
                <circle cx="194.72" cy="190.674" r="177.041" fill="#5FEDA9" />
              </g>
              <g clipPath="url(#clip0)">
                <path
                  d="M193.356 288.06H69.3271C65.9449 288.06 63.6896 285.805 63.6896 282.422V271.147C63.6896 267.764 65.9449 265.509 69.3271 265.509H193.356C196.739 265.509 198.994 267.765 198.994 271.147V282.422C198.994 285.805 196.739 288.06 193.356 288.06Z"
                  fill="#F6B545"
                />
                <path
                  d="M170.806 271.147H63.6896C63.6896 267.765 65.9449 265.51 69.3271 265.51H170.806V271.147Z"
                  fill="#FFCB5B"
                />
                <path
                  d="M170.806 271.147V276.785C170.806 280.168 168.55 282.422 165.168 282.422H63.6896C63.6896 285.805 65.9449 288.06 69.3271 288.06H165.168H193.356C196.739 288.06 198.994 285.805 198.994 282.422V271.147H170.806V271.147Z"
                  fill="#F19920"
                />
                <path
                  d="M80.6026 282.422V273.966C80.6026 272.274 79.4752 271.147 77.7838 271.147C76.0925 271.147 74.9651 272.274 74.9651 273.966V282.422"
                  fill="#F19920"
                />
                <path
                  d="M97.5156 282.422V273.966C97.5156 272.274 96.3882 271.147 94.6968 271.147C93.0055 271.147 91.8781 272.274 91.8781 273.966V282.422"
                  fill="#F19920"
                />
                <path
                  d="M114.429 282.422V273.966C114.429 272.274 113.301 271.147 111.61 271.147C109.918 271.147 108.791 272.274 108.791 273.966V282.422"
                  fill="#F19920"
                />
                <path
                  d="M131.342 282.422V273.966C131.342 272.274 130.214 271.147 128.523 271.147C126.831 271.147 125.704 272.274 125.704 273.966V282.422"
                  fill="#F19920"
                />
                <path
                  d="M148.255 282.422V273.966C148.255 272.274 147.127 271.147 145.436 271.147C143.744 271.147 142.617 272.274 142.617 273.966V282.422"
                  fill="#F19920"
                />
                <path
                  d="M165.168 282.422V273.966C165.168 272.274 164.041 271.147 162.349 271.147C160.658 271.147 159.531 272.274 159.531 273.966V282.422"
                  fill="#F19920"
                />
                <path
                  d="M204.632 265.509H80.6026C77.2199 265.509 74.9651 263.254 74.9651 259.872V248.596C74.9651 245.214 77.2204 242.959 80.6026 242.959H204.632C208.014 242.959 210.269 245.214 210.269 248.596V259.872C210.269 263.255 208.014 265.509 204.632 265.509Z"
                  fill="#F6B545"
                />
                <path
                  d="M182.081 248.596H74.9651C74.9651 245.214 77.2204 242.959 80.6026 242.959H182.081V248.596Z"
                  fill="#FFCB5B"
                />
                <path
                  d="M182.081 248.596V254.234C182.081 257.617 179.826 259.871 176.444 259.871H74.9651C74.9651 263.254 77.2204 265.509 80.6026 265.509H176.443H204.632C208.014 265.509 210.269 263.254 210.269 259.871V248.596H182.081V248.596Z"
                  fill="#F19920"
                />
                <path
                  d="M91.8781 259.872V251.415C91.8781 249.724 90.7507 248.596 89.0594 248.596C87.368 248.596 86.2406 249.724 86.2406 251.415V259.872"
                  fill="#F19920"
                />
                <path
                  d="M108.791 259.872V251.415C108.791 249.724 107.664 248.596 105.972 248.596C104.281 248.596 103.154 249.724 103.154 251.415V259.872"
                  fill="#F19920"
                />
                <path
                  d="M125.704 259.872V251.415C125.704 249.724 124.577 248.596 122.885 248.596C121.194 248.596 120.067 249.724 120.067 251.415V259.872"
                  fill="#F19920"
                />
                <path
                  d="M142.617 259.872V251.415C142.617 249.724 141.49 248.596 139.798 248.596C138.107 248.596 136.98 249.724 136.98 251.415V259.872"
                  fill="#F19920"
                />
                <path
                  d="M159.53 259.872V251.415C159.53 249.724 158.403 248.596 156.711 248.596C155.02 248.596 153.893 249.724 153.893 251.415V259.872"
                  fill="#F19920"
                />
                <path
                  d="M176.443 259.872V251.415C176.443 249.724 175.316 248.596 173.624 248.596C171.933 248.596 170.806 249.724 170.806 251.415V259.872"
                  fill="#F19920"
                />
                <path
                  d="M215.907 220.408H91.8781C88.4954 220.408 86.2406 218.153 86.2406 214.77V203.495C86.2406 200.112 88.4959 197.857 91.8781 197.857H215.907C219.29 197.857 221.545 200.113 221.545 203.495V214.77C221.545 218.153 219.29 220.408 215.907 220.408Z"
                  fill="#F6B545"
                />
                <path
                  d="M193.356 203.495H86.2401C86.2401 200.112 88.4954 197.857 91.8776 197.857H193.356V203.495Z"
                  fill="#FFCB5B"
                />
                <path
                  d="M193.356 203.495V209.132C193.356 212.515 191.101 214.77 187.719 214.77H86.2401C86.2401 218.153 88.4954 220.407 91.8776 220.407H187.719H215.907C219.29 220.407 221.545 218.152 221.545 214.77V203.494H193.356V203.495Z"
                  fill="#F19920"
                />
                <path
                  d="M103.154 214.77V206.314C103.154 204.622 102.026 203.495 100.335 203.495C98.6435 203.495 97.5161 204.622 97.5161 206.314V214.77"
                  fill="#F19920"
                />
                <path
                  d="M120.067 214.77V206.314C120.067 204.622 118.939 203.495 117.248 203.495C115.556 203.495 114.429 204.622 114.429 206.314V214.77"
                  fill="#F19920"
                />
                <path
                  d="M136.98 214.77V206.314C136.98 204.622 135.852 203.495 134.161 203.495C132.469 203.495 131.342 204.622 131.342 206.314V214.77"
                  fill="#F19920"
                />
                <path
                  d="M153.893 214.77V206.314C153.893 204.622 152.765 203.495 151.074 203.495C149.382 203.495 148.255 204.622 148.255 206.314V214.77"
                  fill="#F19920"
                />
                <path
                  d="M170.806 214.77V206.314C170.806 204.622 169.678 203.495 167.987 203.495C166.295 203.495 165.168 204.622 165.168 206.314V214.77"
                  fill="#F19920"
                />
                <path
                  d="M187.719 214.77V206.314C187.719 204.622 186.591 203.495 184.9 203.495C183.208 203.495 182.081 204.622 182.081 206.314V214.77"
                  fill="#F19920"
                />
                <path
                  d="M204.632 197.857H80.6026C77.2199 197.857 74.9651 195.602 74.9651 192.22V180.944C74.9651 177.562 77.2204 175.307 80.6026 175.307H204.632C208.014 175.307 210.269 177.562 210.269 180.944V192.22C210.269 195.602 208.014 197.857 204.632 197.857Z"
                  fill="#F6B545"
                />
                <path
                  d="M182.081 180.944H74.9651C74.9651 177.562 77.2204 175.307 80.6026 175.307H182.081V180.944Z"
                  fill="#FFCB5B"
                />
                <path
                  d="M182.081 180.944V186.582C182.081 189.965 179.826 192.219 176.444 192.219H74.9651C74.9651 195.602 77.2204 197.857 80.6026 197.857H176.443H204.632C208.014 197.857 210.269 195.602 210.269 192.219V180.944H182.081V180.944Z"
                  fill="#F19920"
                />
                <path
                  d="M91.8781 192.219V183.763C91.8781 182.071 90.7507 180.944 89.0594 180.944C87.368 180.944 86.2406 182.071 86.2406 183.763V192.219"
                  fill="#F19920"
                />
                <path
                  d="M108.791 192.219V183.763C108.791 182.071 107.664 180.944 105.972 180.944C104.281 180.944 103.154 182.071 103.154 183.763V192.219"
                  fill="#F19920"
                />
                <path
                  d="M125.704 192.219V183.763C125.704 182.071 124.577 180.944 122.885 180.944C121.194 180.944 120.067 182.071 120.067 183.763V192.219"
                  fill="#F19920"
                />
                <path
                  d="M142.617 192.219V183.763C142.617 182.071 141.49 180.944 139.798 180.944C138.107 180.944 136.98 182.071 136.98 183.763V192.219"
                  fill="#F19920"
                />
                <path
                  d="M159.53 192.219V183.763C159.53 182.071 158.403 180.944 156.711 180.944C155.02 180.944 153.893 182.071 153.893 183.763V192.219"
                  fill="#F19920"
                />
                <path
                  d="M176.443 192.219V183.763C176.443 182.071 175.316 180.944 173.624 180.944C171.933 180.944 170.806 182.071 170.806 183.763V192.219"
                  fill="#F19920"
                />
                <path
                  d="M193.356 242.959H69.3271C65.9449 242.959 63.6896 240.704 63.6896 237.321V226.045C63.6896 222.663 65.9449 220.408 69.3271 220.408H193.356C196.739 220.408 198.994 222.663 198.994 226.045V237.321C198.994 240.704 196.739 242.959 193.356 242.959Z"
                  fill="#F6B545"
                />
                <path
                  d="M170.806 226.046H63.6896C63.6896 222.663 65.9449 220.408 69.3271 220.408H170.806V226.046Z"
                  fill="#FFCB5B"
                />
                <path
                  d="M170.806 226.046V231.683C170.806 235.066 168.55 237.321 165.168 237.321H63.6896C63.6896 240.704 65.9449 242.958 69.3271 242.958H165.168H193.356C196.739 242.958 198.994 240.703 198.994 237.321V226.045H170.806V226.046Z"
                  fill="#F19920"
                />
                <path
                  d="M80.6026 237.321V228.864C80.6026 227.173 79.4752 226.045 77.7838 226.045C76.0925 226.045 74.9651 227.173 74.9651 228.864V237.321"
                  fill="#F19920"
                />
                <path
                  d="M97.5156 237.321V228.864C97.5156 227.173 96.3882 226.045 94.6968 226.045C93.0055 226.045 91.8781 227.173 91.8781 228.864V237.321"
                  fill="#F19920"
                />
                <path
                  d="M114.429 237.321V228.864C114.429 227.173 113.301 226.045 111.61 226.045C109.918 226.045 108.791 227.173 108.791 228.864V237.321"
                  fill="#F19920"
                />
                <path
                  d="M131.342 237.321V228.864C131.342 227.173 130.214 226.045 128.523 226.045C126.831 226.045 125.704 227.173 125.704 228.864V237.321"
                  fill="#F19920"
                />
                <path
                  d="M148.255 237.321V228.864C148.255 227.173 147.127 226.045 145.436 226.045C143.744 226.045 142.617 227.173 142.617 228.864V237.321"
                  fill="#F19920"
                />
                <path
                  d="M165.168 237.321V228.864C165.168 227.173 164.041 226.045 162.349 226.045C160.658 226.045 159.531 227.173 159.531 228.864V237.321"
                  fill="#F19920"
                />
                <path
                  d="M300.472 251.415C293.143 246.341 289.197 237.885 289.197 228.865C289.197 194.475 275.666 161.776 251.424 137.534L227.182 113.292V96.3794L246.914 71.5736C248.606 69.3183 249.733 66.4995 249.733 63.6803C249.733 56.9149 244.096 51.2774 237.33 51.2774H215.907L210.27 62.5529L198.994 51.2774H171.933C165.168 51.2774 159.53 56.9149 159.53 63.6803C159.53 66.4991 160.657 69.3178 162.349 71.5731L182.081 96.3789V113.292L157.839 137.534C133.597 161.776 120.066 194.474 120.066 228.864C120.066 237.884 116.12 246.341 108.791 251.415C101.461 256.488 97.5151 264.945 97.5151 273.965C97.5151 281.858 103.717 288.059 111.609 288.059H297.653C305.546 288.059 311.747 281.858 311.747 273.965C311.748 264.946 307.801 256.489 300.472 251.415Z"
                  fill="#C97629"
                />
                <path
                  d="M300.472 251.415C293.143 245.778 289.197 237.321 289.197 228.301C289.761 192.783 273.411 159.521 248.605 134.152L227.182 113.292V96.3789L246.914 71.5731C250.297 67.6269 250.86 61.989 248.041 56.9149C245.786 52.9688 241.276 51.2774 236.766 51.2774C232.82 51.2774 230.564 55.7875 231.692 59.1702C232.256 60.2976 232.819 61.989 232.819 63.6803C232.819 66.4991 231.692 69.3178 230 71.5731L210.269 96.3789V113.292H182.08L176.443 118.929H215.907L236.766 139.789C259.881 162.903 268.901 194.475 266.646 226.609C266.082 236.193 270.029 245.214 277.358 250.851C277.922 251.415 278.485 251.979 279.049 251.979C287.506 260.999 280.176 276.22 267.21 276.22H98.0795C99.2069 282.422 104.845 287.496 111.61 287.496H275.103H289.197H297.654C305.546 287.496 311.748 281.295 311.748 273.402V272.275C311.748 263.818 307.237 256.489 300.472 251.415Z"
                  fill="#B06328"
                />
                <path
                  d="M230.001 113.292H179.262C174.752 113.292 170.805 109.346 170.805 104.835C170.805 100.325 174.751 96.3784 179.262 96.3784H230.001C234.511 96.3784 238.458 100.325 238.458 104.835C238.458 109.346 234.511 113.292 230.001 113.292Z"
                  fill="#FFCB5B"
                />
                <path
                  d="M179.262 96.3789H207.45C209.142 96.3789 210.269 97.5063 210.269 99.1977C210.269 100.889 209.142 102.016 207.45 102.016H179.262C177.57 102.016 176.443 100.889 176.443 99.1977C176.443 97.5068 177.571 96.3789 179.262 96.3789Z"
                  fill="#FFE278"
                />
                <path
                  d="M230.001 96.3789H227.183V102.016C227.183 105.399 224.927 107.654 221.545 107.654H171.37C172.497 111.037 175.88 113.291 179.262 113.291H230.001C234.511 113.291 238.458 109.345 238.458 104.835C238.458 100.324 234.511 96.3789 230.001 96.3789Z"
                  fill="#F6B545"
                />
                <path
                  d="M213.088 107.654H230.001C231.693 107.654 232.82 108.782 232.82 110.473C232.82 112.165 231.693 113.292 230.001 113.292H213.088C211.397 113.292 210.27 112.165 210.27 110.473C210.269 108.782 211.397 107.654 213.088 107.654Z"
                  fill="#F19920"
                />
                <path
                  d="M210.27 113.292H198.994V158.393H210.27V113.292Z"
                  fill="#F6B545"
                />
                <path
                  d="M198.994 113.292V118.93H204.632V158.393H210.269V118.93V113.292H198.994Z"
                  fill="#F19920"
                />
                <path
                  d="M204.632 242.959C229.54 242.959 249.733 222.766 249.733 197.857C249.733 172.948 229.54 152.756 204.632 152.756C179.723 152.756 159.53 172.948 159.53 197.857C159.53 222.766 179.723 242.959 204.632 242.959Z"
                  fill="#F6B545"
                />
                <path
                  d="M239.021 169.105C245.787 176.998 249.733 186.582 249.733 197.857C249.733 222.663 229.437 242.959 204.632 242.959C193.356 242.959 183.772 239.013 175.88 232.247C184.336 242.395 196.739 248.596 210.27 248.596C235.075 248.596 255.371 228.301 255.371 203.495C255.371 189.401 249.169 176.998 239.021 169.105Z"
                  fill="#B06328"
                />
                <path
                  d="M204.632 237.321C226.427 237.321 244.096 219.653 244.096 197.857C244.096 176.062 226.427 158.393 204.632 158.393C182.836 158.393 165.168 176.062 165.168 197.857C165.168 219.653 182.836 237.321 204.632 237.321Z"
                  fill="#FFCB5B"
                />
                <path
                  d="M244.096 197.857C244.096 219.844 226.619 237.321 204.632 237.321V242.959C229.437 242.959 249.733 222.663 249.733 197.857H244.096Z"
                  fill="#F19920"
                />
                <path
                  d="M204.632 158.393V152.756C179.826 152.756 159.53 173.052 159.53 197.857H165.168C165.168 175.87 182.645 158.393 204.632 158.393Z"
                  fill="#FFE27A"
                />
                <path
                  d="M210.269 192.219H198.994C195.611 192.219 193.356 189.964 193.356 186.582C193.356 183.199 195.611 180.944 198.994 180.944H215.907C219.289 180.944 221.544 178.689 221.544 175.307C221.544 171.924 219.289 169.669 215.907 169.669H210.269C210.269 166.287 208.014 164.032 204.632 164.032C201.249 164.032 198.994 166.287 198.994 169.669C189.41 169.669 182.081 176.998 182.081 186.582C182.081 196.167 189.41 203.495 198.994 203.495H210.27C213.652 203.495 215.907 205.751 215.907 209.133C215.907 212.515 213.652 214.77 210.27 214.77H193.357C189.974 214.77 187.719 217.026 187.719 220.408C187.719 223.791 189.974 226.045 193.357 226.045H198.994C198.994 229.428 201.249 231.683 204.632 231.683C208.014 231.683 210.269 229.428 210.269 226.045C219.853 226.045 227.182 218.717 227.182 209.132C227.182 199.548 219.853 192.219 210.269 192.219Z"
                  fill="#E78825"
                />
              </g>
              <defs>
                <filter
                  id="filter0_d"
                  x="0.678802"
                  y="0.632446"
                  width="388.083"
                  height="388.083"
                  filterUnits="userSpaceOnUse"
                  color-interpolation-filters="sRGB"
                >
                  <feFlood flood-opacity="0" result="BackgroundImageFix" />
                  <feColorMatrix
                    in="SourceAlpha"
                    type="matrix"
                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  />
                  <feMorphology
                    radius="4"
                    operator="dilate"
                    in="SourceAlpha"
                    result="effect1_dropShadow"
                  />
                  <feOffset dy="4" />
                  <feGaussianBlur stdDeviation="6.5" />
                  <feColorMatrix
                    type="matrix"
                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"
                  />
                  <feBlend
                    mode="normal"
                    in2="BackgroundImageFix"
                    result="effect1_dropShadow"
                  />
                  <feBlend
                    mode="normal"
                    in="SourceGraphic"
                    in2="effect1_dropShadow"
                    result="shape"
                  />
                </filter>
                <clipPath id="clip0">
                  <rect
                    width="248.058"
                    height="248.058"
                    fill="white"
                    transform="translate(63.6896 45.6399)"
                  />
                </clipPath>
              </defs>
            </svg>
            <input
              type="number"
              placeholder="000$"
              value={newLimitValue}
              name="newLimit"
              onChange={handleChangeInput}
            />
            <button onClick={handleSetLimit}>SET</button>
          </div>
          <div className="limitBox">
            <p>Set target</p>
            <svg
              viewBox="0 0 389 389"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g filter="url(#filter0_d)">
                <circle cx="194.565" cy="190.674" r="177.041" fill="#5FEDA9" />
              </g>
              <g clipPath="url(#clip0)">
                <path
                  d="M191.587 302.317C251.387 302.317 299.864 253.84 299.864 194.04C299.864 134.24 251.387 85.7621 191.587 85.7621C131.787 85.7621 83.3096 134.24 83.3096 194.04C83.3096 253.84 131.787 302.317 191.587 302.317Z"
                  fill="#FD646F"
                />
                <path
                  d="M299.864 194.039C299.864 253.838 251.385 302.317 191.587 302.317C159.139 302.317 130.019 288.04 110.178 265.422C129.237 282.15 154.216 292.291 181.561 292.291C241.36 292.291 289.839 243.812 289.839 184.014C289.839 156.669 279.698 131.69 262.97 112.631C285.588 132.472 299.864 161.591 299.864 194.039Z"
                  fill="#FC4755"
                />
                <path
                  d="M191.587 275.749C236.714 275.749 273.296 239.166 273.296 194.04C273.296 148.913 236.714 112.33 191.587 112.33C146.46 112.33 109.878 148.913 109.878 194.04C109.878 239.166 146.46 275.749 191.587 275.749Z"
                  fill="#F5F5F5"
                />
                <path
                  d="M273.296 194.04C273.296 239.165 236.713 275.749 191.587 275.749C166.473 275.749 144.005 264.415 129.012 246.589C143.218 258.53 161.55 265.723 181.561 265.723C226.687 265.723 263.271 229.14 263.271 184.014C263.271 164.003 256.077 145.671 244.137 131.464C261.962 146.458 273.296 168.925 273.296 194.04Z"
                  fill="#E6E6E6"
                />
                <path
                  d="M191.587 249.181C222.041 249.181 246.728 224.493 246.728 194.04C246.728 163.586 222.041 138.898 191.587 138.898C161.133 138.898 136.446 163.586 136.446 194.04C136.446 224.493 161.133 249.181 191.587 249.181Z"
                  fill="#FD646F"
                />
                <path
                  d="M246.728 194.04C246.728 224.493 222.04 249.181 191.587 249.181C173.806 249.181 157.986 240.764 147.905 227.696C157.214 234.884 168.889 239.155 181.561 239.155C212.014 239.155 236.703 214.467 236.703 184.014C236.703 171.341 232.432 159.667 225.243 150.358C238.312 160.438 246.728 176.259 246.728 194.04Z"
                  fill="#FC4755"
                />
                <path
                  d="M191.587 222.111C207.091 222.111 219.659 209.543 219.659 194.039C219.659 178.536 207.091 165.968 191.587 165.968C176.083 165.968 163.515 178.536 163.515 194.039C163.515 209.543 176.083 222.111 191.587 222.111Z"
                  fill="#F5F5F5"
                />
                <path
                  d="M294.035 229.175C291.899 235.401 289.217 241.366 286.039 247.015L261.867 235.741C265.181 230.177 267.847 224.182 269.767 217.861L294.035 229.175Z"
                  fill="#FC4755"
                />
                <path
                  d="M269.767 217.861C267.847 224.182 265.181 230.177 261.867 235.741L237.6 224.427C241.179 219.028 243.826 212.968 245.32 206.461L269.767 217.861Z"
                  fill="#E6E6E6"
                />
                <path
                  d="M245.32 206.461C243.826 212.968 241.179 219.029 237.6 224.427L212.526 212.737C216.867 207.875 219.544 201.494 219.654 194.491L245.32 206.461Z"
                  fill="#FC4755"
                />
                <path
                  d="M219.654 194.491C219.544 201.494 216.867 207.875 212.526 212.737L189.04 201.784C184.449 199.649 182.303 194.395 183.942 189.713C184.053 189.408 184.173 189.102 184.313 188.796C185.456 186.35 187.476 184.6 189.833 183.743C192.179 182.891 194.86 182.926 197.302 184.069L219.654 194.491Z"
                  fill="#E6E6E6"
                />
                <path
                  d="M330.532 99.4783C331.335 99.6121 331.652 100.597 331.077 101.175L320.472 111.829L313.965 118.366L296.186 136.222C295.043 137.37 293.416 137.895 291.818 137.632L265.3 133.264L285.161 113.563L291.743 107.037L303.849 95.0259L330.532 99.4783Z"
                  fill="#50758D"
                />
                <path
                  d="M320.472 111.829L313.966 118.366L285.162 113.563L291.744 107.037L320.472 111.829Z"
                  fill="#2B597F"
                />
                <path
                  d="M291.157 83.4512L279.111 95.2364L272.56 101.648L252.769 121.012L248.349 94.1546C248.087 92.5615 248.608 90.9399 249.749 89.7979L267.602 71.9266L274.134 65.3849L284.94 54.5697C285.519 53.9902 286.511 54.312 286.64 55.1206L291.157 83.4512Z"
                  fill="#50758D"
                />
                <path
                  d="M279.111 95.2364L272.56 101.648L267.602 71.9267L274.134 65.3849L279.111 95.2364Z"
                  fill="#2B597F"
                />
                <path
                  d="M314.071 81.832C314.071 84.3284 313.118 86.8348 311.209 88.7397L200.079 199.869C196.5 203.454 190.83 203.674 186.99 200.531C186.74 200.326 186.494 200.105 186.258 199.869C184.348 197.96 183.396 195.463 183.396 192.957C183.396 190.46 184.348 187.954 186.258 186.049L297.388 74.9193C301.203 71.0995 307.394 71.0995 311.209 74.9193C311.444 75.1549 311.665 75.4005 311.87 75.6512C313.339 77.4458 314.071 79.6364 314.071 81.832Z"
                  fill="#918291"
                />
                <path
                  d="M314.071 81.8321C314.071 84.3285 313.118 86.8349 311.209 88.7398L200.079 199.87C196.5 203.454 190.83 203.674 186.99 200.531L311.87 75.6512C313.339 77.4458 314.071 79.6365 314.071 81.8321Z"
                  fill="#7A6E79"
                />
              </g>
              <defs>
                <filter
                  id="filter0_d"
                  x="0.523712"
                  y="0.632446"
                  width="388.083"
                  height="388.083"
                  filterUnits="userSpaceOnUse"
                  color-interpolation-filters="sRGB"
                >
                  <feFlood flood-opacity="0" result="BackgroundImageFix" />
                  <feColorMatrix
                    in="SourceAlpha"
                    type="matrix"
                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  />
                  <feMorphology
                    radius="4"
                    operator="dilate"
                    in="SourceAlpha"
                    result="effect1_dropShadow"
                  />
                  <feOffset dy="4" />
                  <feGaussianBlur stdDeviation="6.5" />
                  <feColorMatrix
                    type="matrix"
                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"
                  />
                  <feBlend
                    mode="normal"
                    in2="BackgroundImageFix"
                    result="effect1_dropShadow"
                  />
                  <feBlend
                    mode="normal"
                    in="SourceGraphic"
                    in2="effect1_dropShadow"
                    result="shape"
                  />
                </filter>
                <clipPath id="clip0">
                  <rect
                    width="248.061"
                    height="248.061"
                    fill="white"
                    transform="translate(83.3096 54.2649)"
                  />
                </clipPath>
              </defs>
            </svg>
            <input
              type="number"
              placeholder="000$"
              value={newTargetValue}
              onChange={handleChangeInput}
              name="newTarget"
            />
            <button onClick={handleSetTarget}>SET</button>
          </div>
          <div className="limitBox">
            <p>Edit limit</p>
            <svg
              viewBox="0 0 389 389"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g filter="url(#filter0_d)">
                <circle cx="194.052" cy="190.674" r="177.041" fill="#5FEDA9" />
              </g>
              <g clipPath="url(#clip0)">
                <path
                  d="M188.62 291.859C242.256 291.859 285.737 248.378 285.737 194.742C285.737 141.106 242.256 97.6251 188.62 97.6251C134.984 97.6251 91.5033 141.106 91.5033 194.742C91.5033 248.378 134.984 291.859 188.62 291.859Z"
                  fill="#FDBF00"
                />
                <path
                  d="M285.737 194.742C285.737 248.292 242.17 291.859 188.62 291.859V97.6251C242.17 97.6251 285.737 141.192 285.737 194.742Z"
                  fill="#FF9100"
                />
                <path
                  d="M188.62 276.786C233.932 276.786 270.664 240.053 270.664 194.742C270.664 149.431 233.932 112.698 188.62 112.698C143.309 112.698 106.577 149.431 106.577 194.742C106.577 240.053 143.309 276.786 188.62 276.786Z"
                  fill="#FFE9CB"
                />
                <path
                  d="M270.664 194.742C270.664 239.982 233.86 276.786 188.62 276.786V112.698C233.86 112.698 270.664 149.502 270.664 194.742Z"
                  fill="#FFD17B"
                />
                <path
                  d="M219.443 209.854C219.443 221.523 210.493 232.267 195.916 232.267V239.631C195.916 243.664 192.648 246.927 188.62 246.927C184.593 246.927 181.324 243.664 181.324 239.631V232.267C172.778 232.267 165.473 229.972 159.485 222.788C156.907 219.689 157.326 215.088 160.424 212.51C163.517 209.932 168.119 210.35 170.697 213.449C172.876 216.066 176.105 217.641 179.34 217.676H197.035C201.359 217.676 204.851 214.173 204.851 209.854C204.851 205.545 201.344 202.038 197.035 202.038H180.206C167.846 202.038 157.797 191.984 157.797 179.63C157.797 168.238 166.46 157.222 181.324 157.222V149.853C181.324 145.825 184.593 142.557 188.62 142.557C192.648 142.557 195.916 145.825 195.916 149.853V157.222C205.639 157.222 213.548 162.027 218.208 169.318L218.295 169.454C220.464 172.849 219.472 177.358 216.077 179.528C212.682 181.697 208.168 180.705 205.999 177.31L205.916 177.173C203.82 173.9 200.187 171.847 196.432 171.813H180.206C175.886 171.813 172.389 175.306 172.389 179.63C172.389 183.939 175.896 187.446 180.206 187.446H197.035C209.394 187.446 219.443 197.5 219.443 209.854Z"
                  fill="#FDBF00"
                />
                <path
                  d="M219.443 209.854C219.443 221.523 210.493 232.267 195.916 232.267V239.631C195.916 243.663 192.648 246.927 188.62 246.927V217.675H197.035C201.359 217.675 204.851 214.173 204.851 209.854C204.851 205.545 201.344 202.038 197.035 202.038H188.62V187.446H197.035C209.394 187.446 219.443 197.5 219.443 209.854Z"
                  fill="#FF9100"
                />
                <path
                  d="M196.432 171.813H188.62V142.557C192.648 142.557 195.916 145.825 195.916 149.853V157.222C205.639 157.222 213.548 162.027 218.208 169.318L218.295 169.454C220.464 172.849 219.472 177.358 216.077 179.528C212.682 181.697 208.168 180.705 205.999 177.31L205.916 177.173C203.82 173.9 200.187 171.847 196.432 171.813Z"
                  fill="#FF9100"
                />
                <path
                  d="M338.626 162.548L296.008 101.901C294.992 100.452 293.41 99.7322 291.833 99.7322C290.255 99.7322 288.674 100.452 287.657 101.901L245.039 162.548C242.66 165.931 245.079 170.586 249.214 170.586H261.877C264.817 170.586 267.154 173.067 266.971 176.007L260.499 280.741C260.321 283.676 262.653 286.157 265.598 286.157H318.067C321.012 286.157 323.345 283.676 323.166 280.741L316.694 176.007C316.51 173.067 318.848 170.587 321.788 170.587H334.451C338.586 170.587 341.005 165.932 338.626 162.548Z"
                  fill="#00AB5E"
                />
                <path
                  d="M338.626 162.548L296.008 101.901C294.992 100.452 293.41 99.7322 291.833 99.7322V286.157H318.067C321.012 286.157 323.345 283.676 323.166 280.741L316.694 176.007C316.51 173.067 318.848 170.587 321.788 170.587H334.451C338.586 170.587 341.005 165.932 338.626 162.548Z"
                  fill="#008575"
                />
              </g>
              <defs>
                <filter
                  id="filter0_d"
                  x="0.010498"
                  y="0.632446"
                  width="388.083"
                  height="388.083"
                  filterUnits="userSpaceOnUse"
                  color-interpolation-filters="sRGB"
                >
                  <feFlood flood-opacity="0" result="BackgroundImageFix" />
                  <feColorMatrix
                    in="SourceAlpha"
                    type="matrix"
                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  />
                  <feMorphology
                    radius="4"
                    operator="dilate"
                    in="SourceAlpha"
                    result="effect1_dropShadow"
                  />
                  <feOffset dy="4" />
                  <feGaussianBlur stdDeviation="6.5" />
                  <feColorMatrix
                    type="matrix"
                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"
                  />
                  <feBlend
                    mode="normal"
                    in2="BackgroundImageFix"
                    result="effect1_dropShadow"
                  />
                  <feBlend
                    mode="normal"
                    in="SourceGraphic"
                    in2="effect1_dropShadow"
                    result="shape"
                  />
                </filter>
                <clipPath id="clip0">
                  <rect
                    width="248.061"
                    height="248.061"
                    fill="white"
                    transform="translate(91.5033 70.7114)"
                  />
                </clipPath>
              </defs>
            </svg>
            <input
              type="number"
              placeholder="000$"
              value={newEditValue}
              onChange={handleChangeInput}
              name="editLimit"
            />
            <button onClick={handleEditLimit}>ADD</button>
          </div>
        </div>
        <button className="deleteButton" onClick={handleDeleteLimit}>
          DELETE LIMIT
        </button>
      </section>
      {isMessageVisable && (
        <Message handler={handleCloseMessage} message={message} />
      )}
    </>
  );
};

export default Limits;
